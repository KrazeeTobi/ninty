(function(){var a=(function(){var d=function(k){if(typeof k!=="object"){k={}}this.param=k;this.wrapper=$(k.selector);if("type" in k){switch(k.type){case"move":this.type=this.SLIDE_TYPE_MOVE;break;case"fade":this.type=this.SLIDE_TYPE_FADE;break;default:this.type=this.SLIDE_TYPE_MOVE}}else{this.type=this.SLIDE_TYPE_MOVE}this.slide="slide" in k?$(k.slide):this.wrapper.find(".slide");this.items="items" in k?$(k.items):this.wrapper.find(".item");this.prev="prev" in k?$(k.prev):this.wrapper.find(".prev");this.next="next" in k?$(k.next):this.wrapper.find(".next");this.inds="inds" in k?$(k.inds):this.wrapper.find(".inds");this.current=0;this.slideW="itemWidth" in k?parseInt(k.itemWidth):this.items.eq(0).outerWidth(false);this.duration="duration" in k&&(typeof k.duration==="number"||typeof k.duration==="function")?k.duration:800;this.easing="easing" in k?(typeof k.easing==="string"?jQuery.easing[k.easing]:k.easing):jQuery.easing.ioX2;this.loop="loop" in k?!!k.loop:false;this.flickable="flickable" in k?!!k.flickable:true;this.keyboard="keyboard" in k?k.keyboard:false;this.useCSS3="css3" in k?!!k.css3&&Shared.css.hasTransition:Shared.css.hasTransition;this.slideX=0;this.animationID=null;this.beforeCallback="before" in k&&typeof k.before==="function"?k.before:false;this.afterCallback="after" in k&&typeof k.after==="function"?k.after:false;this.resizeCallback="resize" in k&&typeof k.resize==="function"?k.resize:false;this.stepCallback="step" in k&&typeof k.step==="function"?k.step:false;this.interval="interval" in k&&typeof k.interval==="number"?k.interval:false;this.intervalID=null;this.stopIfManipulate="stopIfManipulate" in k?!!k.stopIfManipulate:false;this.intervalActive=!!this.interval;if("arrowPrev" in k&&typeof k.arrowPrev==="function"){this.arrowPrev=k.arrowPrev}if("arrowNext" in k&&typeof k.arrowNext==="function"){this.arrowNext=k.arrowNext}if("itemGap" in k){this.itemGap=parseInt(k.itemGap);this.items.css({marginRight:this.itemGap})}else{this.itemGap=parseFloat(this.items.eq(0).css("margin-right"))}this.winW;this.winH;if("cookie" in k){this.cookie={name:"slide_saved_index",expires:"30minutes"};if(typeof k.cookie==="object"){if("name" in k.cookie){this.cookie.name=k.cookie.name}if("expires" in k.cookie){this.cookie.expires=k.cookie.expires}}}else{this.cookie=false}if("ini" in k){this.current=parseInt(k.ini)||0}else{if(this.cookie){this.current=parseInt(Shared.util.cookie(this.cookie.name))||0}}this.current=Shared.util.clamp(this.current,0,this.items.length-1);if(this.inds.get(0)){if(this.inds.length===this.items.length){this.buttons=this.inds}else{if(this.inds.children("*").length!==this.items.length){for(var j=0,g=this.items.length;j<g;j++){this.inds.append($("<li></li>"))}}this.buttons=this.inds.children("*")}}else{this.buttons=null}this.prev.find("img").img2vml();this.next.find("img").img2vml();if(this.type===this.SLIDE_TYPE_MOVE){if(this.loop){this.beforeClone=this.items.eq(-1).clone(true);this.afterClone=this.items.eq(0).clone(true);this.slide.prepend(this.beforeClone);this.slide.append(this.afterClone)}Shared.util.addResizeListener(function(i,l){this.winW=i;this.winH=l;if(this.resizeCallback){this.slideW=this.resizeCallback.call(this,i,l)||this.items.eq(0).width();this.items.css({width:this.slideW});if(this.loop){this.beforeClone.css({width:this.slideW});this.afterClone.css({width:this.slideW})}}if(this.loop){this.slide.css({width:(this.slideW+this.itemGap)*(this.items.length+2)})}else{this.slide.css({width:(this.slideW+this.itemGap)*this.items.length})}Shared.util.cancelAF(this.animationID);this.slideX=-(this.slideW+this.itemGap)*this.current;c.call(this)},this)}else{if(this.type===this.SLIDE_TYPE_FADE){var h=this;this.items.css({position:"absolute",top:0,left:0});this.items.each(function(){h.slide.prepend(this)});Shared.util.addResizeListener(function(i,l){this.winW=i;this.winH=l;if(this.resizeCallback){this.slideW=this.resizeCallback.call(this,i,l)||this.items.eq(0).width();this.items.css({width:this.slideW})}this.slide.css({height:this.items.eq(0).height()});Shared.util.cancelAF(h.animationID)},this)}}e.call(this,true);b.call(this,true);f.call(this)};d.prototype.SLIDE_TYPE_MOVE=0;d.prototype.SLIDE_TYPE_FADE=1;function c(){if(this.loop){var g=this.slideX-(this.slideW+this.itemGap)}else{var g=this.slideX}if(this.useCSS3){this.slide.translate3d(g,0)}else{this.slide.css({marginLeft:g})}if(this.stepCallback){this.stepCallback.call(this,this.slideX)}}function e(g){if(this.interval!==null){clearTimeout(this.intervalID)}if(this.buttons){this.buttons.removeClass("current").eq(this.current).addClass("current")}if(!this.loop){if(this.current===0){this.arrowPrev.call(this,this.prev,false)}else{this.arrowPrev.call(this,this.prev,true)}if(this.current===this.items.length-1){this.arrowNext.call(this,this.next,false)}else{this.arrowNext.call(this,this.next,true)}}if(this.beforeCallback){this.beforeCallback.call(this,this.current)}if(this.type===this.SLIDE_TYPE_FADE){this.slide.append(this.items.eq(this.current))}if(!g&&this.cookie){Shared.util.cookie(this.cookie.name,""+this.current,{expires:this.cookie.expires})}}function b(g){if(this.afterCallback){this.afterCallback.call(this,this.current)}if(this.intervalActive){this.startTimer()}}function f(){var k=this;var i=null;var h=null;var j=0;var g=null;var l=false;this.next.on("click",function(m){m.preventDefault();k.change(k.current+1)});this.prev.on("click",function(m){m.preventDefault();k.change(k.current-1)});this.buttons.on("click",function(m){m.preventDefault();k.change(k.buttons.index(this))});if(this.keyboard){$(document).on("keydown",function(n){var m=true;if(typeof k.keyboard==="function"){m=k.keyboard.call(k,k.winW,k.winH)}if(m){if(n.keyCode===37){k.change(k.current-1)}else{if(n.keyCode===39){k.change(k.current+1)}}}})}this.wrapper.on("move.slide",function(n,m){if("index" in m){k.change(m.index)}});this.wrapper.on("startTimer.slide",function(m){k.startTimer()});this.wrapper.on("stopTimer.slide",function(m){k.stopTimer()});this.wrapper.on("next.slide",function(m){k.change(k.current+1)});this.wrapper.on("prev.slide",function(m){k.change(k.current-1)});if(this.flickable&&this.type===this.SLIDE_TYPE_MOVE){this.wrapper.on("touchend mouseup",".view a",function(m){if(j!==0){l=true}});this.wrapper.on("click",".view a",function(m){if(l){m.preventDefault()}l=false});this.slide.on("touchstart mousedown",function(m){Shared.util.cancelAF(k.animationID);if(k.interval){clearTimeout(k.intervalID)}if(m.type==="touchstart"){i=m.originalEvent.touches[0].screenX;h=m.originalEvent.touches[0].screenY}else{m.preventDefault();i=m.pageX;g=false}});this.slide.on("touchmove mousemove",function(o){if(i!==null){if(g===null){var n=Math.abs(o.originalEvent.touches[0].screenX-i);var m=Math.abs(o.originalEvent.touches[0].screenY-h);if(m>n){g=true}else{g=false;i=o.originalEvent.touches[0].screenX;o.preventDefault()}}else{if(g){return true}else{o.preventDefault();if(o.type==="touchmove"){j=o.originalEvent.touches[0].screenX-i;i=o.originalEvent.touches[0].screenX}else{j=o.pageX-i;i=o.pageX}k.slideX+=j;c.call(k)}}if(!Shared.ua.isiOS){return false}}});this.slide.on("touchend touchcancel mouseup mouseleave contextmenu",function(m){if(i!==null){var n=k.slideX+(k.slideW+k.itemGap)*k.current;if(g!==null){if(Math.abs(n)>50){if(n>0){k.change(k.current-1,true)}else{k.change(k.current+1,true)}}else{if(n!==0){k.change(k.current,true)}}}else{if(n!==0){k.change(k.current,true)}}i=h=null;j=n=0}g=null})}}d.prototype.arrowPrev=function(i,g){var h=i.find("img");if(g){if(h.length===0){i.stop().fadeIn("normal")}else{i.css({display:"block"});h.stop().animate({opacity:1},300,"swing")}}else{if(h.length===0){i.stop().fadeOut("normal")}else{h.stop().animate({opacity:0},300,"swing",function(){i.css({display:"none"})})}}};d.prototype.arrowNext=function(i,g){var h=i.find("img");if(g){if(h.length===0){i.stop().fadeIn("normal")}else{i.css({display:"block"});h.stop().animate({opacity:1},300,"swing")}}else{if(h.length===0){i.stop().fadeOut("normal")}else{h.stop().animate({opacity:0},300,"swing",function(){i.css({display:"none"})})}}};d.prototype.change=function(i,n,m){var l=Shared.util.clamp(i,0,this.items.length-1);if(this.loop){if(i<0){l=this.items.length-1}else{if(i>this.items.length-1){l=0}}i=Shared.util.clamp(i,-1,this.items.length)}else{i=l}if(l!==this.current||n){this.current=l;if(!m&&this.stopIfManipulate){this.intervalActive=false}Shared.util.cancelAF(this.animationID);e.call(this);if(typeof this.duration==="function"){var k=this.duration.call(this,this.winW,this.winH)}else{var k=this.duration}if(this.type===this.SLIDE_TYPE_MOVE){var j=this.slideX;var h=-(this.slideW+this.itemGap)*i;Shared.util.reqAF((function(o){return function(q,r,s,t){o.animationID=t;var p=Shared.util.clamp(s/k,0,1);o.slideX=j-(j-h)*o.easing(p);c.call(o);if(p===1){if(o.loop){o.slideX=-(o.slideW+o.itemGap)*l;c.call(o)}b.call(o);return false}}})(this))}else{if(this.type===this.SLIDE_TYPE_FADE){var j=this.slideX;var h=-(this.slideW+this.itemGap)*i;var g=this.items.eq(l).css({opacity:0});this.slide.append(g);Shared.util.reqAF((function(o){return function(r,s,t,u){o.animationID=u;var q=Shared.util.clamp(t/k,0,1);var p=o.easing(q);g.css({opacity:p});if(q===1){b.call(o);return false}}})(this))}}}};d.prototype.getCurrent=function(){return this.current};d.prototype.startTimer=function(){this.intervalActive=true;if(this.interval){clearTimeout(this.intervalID);this.intervalID=setTimeout((function(g){return function(){if(g.loop){var h=g.current+1}else{var h=(g.current+1)%g.items.length}if(g.intervalActive){g.change(h,false,true)}}})(this),this.interval)}};d.prototype.stopTimer=function(g){this.intervalActive=false;clearTimeout(this.intervalID)};return d})();jQuery.fn.extend({slide:function(b){return this.each(function(){if(typeof b!=="object"){b={}}b.selector=this;var c=new a(b)})}})})();